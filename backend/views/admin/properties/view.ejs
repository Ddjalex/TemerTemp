<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .temer-green { background-color: #7CB342; }
        .bg-temer-green { background-color: #7CB342; }
        .text-temer-green { color: #7CB342; }
        .border-temer-green { border-color: #7CB342; }
    </style>
</head>
<body class="bg-gray-50">

<nav class="bg-white shadow-lg border-b-2 border-temer-green">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
            <div class="flex items-center space-x-8">
                <div class="flex-shrink-0 flex items-center">
                    <img src="/uploads/temer-logo.jpg" alt="Temer Properties Logo" class="h-8 w-8 rounded mr-3">
                    <span class="text-xl font-bold text-gray-900">Temer Properties</span>
                </div>
                <div class="flex items-center space-x-1">
                    <a href="/admin/dashboard" class="text-gray-500 hover:text-gray-700">Dashboard</a>
                    <span class="text-gray-500">/</span>
                    <a href="/admin/properties" class="text-gray-500 hover:text-gray-700">Properties</a>
                    <span class="text-gray-500">/</span>
                    <span class="text-gray-900 font-medium">View</span>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <div class="w-8 h-8 bg-temer-green rounded-full flex items-center justify-center">
                    <span class="text-white font-semibold text-sm"><%= user.fullName.split(' ').map(n => n[0]).join('') %></span>
                </div>
                <a href="/admin/logout" class="text-red-600 hover:text-red-800">
                    <i class="fas fa-sign-out-alt mr-1"></i> Logout
                </a>
            </div>
        </div>
    </div>
</nav>

<main class="py-6">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
            <div class="flex items-center justify-between mb-6">
                <h1 class="text-2xl font-bold text-gray-900"><%= property.title || 'Property Details' %></h1>
                <div class="flex space-x-3">
                    <a href="/admin/properties/edit/<%= property._id %>" class="bg-temer-green hover:bg-green-600 text-white px-4 py-2 rounded-lg">
                        <i class="fas fa-edit mr-2"></i> Edit Property
                    </a>
                    <a href="/admin/properties" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg">
                        <i class="fas fa-arrow-left mr-2"></i> Back to Properties
                    </a>
                </div>
            </div>

            <!-- Property Images -->
            <% if (property.images && property.images.length > 0) { %>
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Images</h3>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                        <% property.images.forEach(function(image) { %>
                            <div class="relative">
                                <img src="<%= image.url %>" alt="<%= image.alt %>" class="w-full h-32 object-cover rounded-lg">
                                <% if (image.isPrimary) { %>
                                    <span class="absolute top-2 left-2 bg-green-600 text-white px-2 py-1 text-xs rounded">Primary</span>
                                <% } %>
                            </div>
                        <% }); %>
                    </div>
                </div>
            <% } %>

            <!-- Property Details -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Basic Information</h3>
                    <div class="space-y-3">
                        <div><strong>Price:</strong> <% if (property.price) { %>$<%= property.price.toLocaleString() %><% } else { %>Not set<% } %></div>
                        <div><strong>Type:</strong> <%= (property.propertyType || 'house').charAt(0).toUpperCase() + (property.propertyType || 'house').slice(1) %></div>
                        <div><strong>Status:</strong> <%= (property.status || 'for-sale').replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase()) %></div>
                        <div><strong>Featured:</strong> <%= property.isFeatured ? 'Yes' : 'No' %></div>
                        <div><strong>Active:</strong> <%= property.isActive ? 'Yes' : 'No' %></div>
                    </div>
                </div>

                <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Address</h3>
                    <div class="space-y-2">
                        <% if (property.address?.street) { %><div><%= property.address.street %></div><% } %>
                        <div><%= [property.address?.city, property.address?.state].filter(Boolean).join(', ') %></div>
                        <% if (property.address?.zipCode) { %><div><%= property.address.zipCode %></div><% } %>
                        <div><%= property.address?.country || 'Ethiopia' %></div>
                    </div>
                </div>

                <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Property Features</h3>
                    <div class="space-y-2">
                        <div><strong>Bedrooms:</strong> <%= property.features?.bedrooms || 'Not specified' %></div>
                        <div><strong>Bathrooms:</strong> <%= property.features?.bathrooms || 'Not specified' %></div>
                        <div><strong>Square Feet:</strong> <%= property.features?.sqft ? property.features.sqft.toLocaleString() + ' sq ft' : 'Not specified' %></div>
                        <div><strong>Year Built:</strong> <%= property.features?.yearBuilt || 'Not specified' %></div>
                    </div>
                </div>

                <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Statistics</h3>
                    <div class="space-y-2">
                        <div><strong>Views:</strong> <%= property.views || 0 %></div>
                        <div><strong>Created:</strong> <%= property.createdAt ? new Date(property.createdAt).toLocaleDateString() : 'Unknown' %></div>
                        <div><strong>Updated:</strong> <%= property.updatedAt ? new Date(property.updatedAt).toLocaleDateString() : 'Unknown' %></div>
                    </div>
                </div>
            </div>

            <% if (property.description) { %>
                <div class="mt-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Description</h3>
                    <p class="text-gray-700 leading-relaxed"><%= property.description %></p>
                </div>
            <% } %>
        </div>
    </div>
</main>

</body>
</html>